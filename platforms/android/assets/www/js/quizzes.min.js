var quizzesModel=function(){"use strict";var e={},t="quizzesModel",i={img:"",index:"0",name:"Q01 - Free",questions:[{a:["Thai green curry","Scallops","Beef Bourguignon","Sticky toffee pudding"],c:1,q:"What food pairs well with Chablis Premier Cru?"},{a:["Viognier and Shiraz","Merlot and Cabernet Sauvignon","Garnacha and Carignan","Pinot Noir and Chardonnay"],c:2,q:"Which varieties are commonly blended with Tempranillo?"},{a:["Traditional method","Tank","Soda stream","Charmat"],c:0,q:"What is the method used to make Cremant d’Loire"},{a:["Nuit-Saint- George","Mâconnais","Cote d’Or","Beaujolais"],c:1,q:"Which area in Burgundy produces the most white wine?"},{a:["Continental","Mediterranean","Maritime","High altitudes"],c:0,q:"What climate influences the wines made in Rioja?"}]},n=[];return e.quizzesAdded=new Event(t),e.quizzesRemoved=new Event(t),e.addQuizzes=function(t){n=t,e.quizzesAdded.notify({quizzes:$.extend(!0,[],n)})},e.removeQuizzes=function(){n.length=0,e.quizzesRemoved.notify()},e.getQuizzes=function(){return $.extend(!0,[],n)},e.getQuizz=function(e){return"free"===e?{curr:i,prev:n}:{curr:n[e],prev:n}},e}(),quizzesView=function(){"use strict";var e={},t=null,i="quizzesView",n=null,o=null,r=null,u=null,a=!1;return e.backButtonClicked=new Event(i),e.quizAnswerClicked=new Event(i),e.homeButtonClicked=new Event(i),e.shareButtonClicked=new Event(i),e.previousQuizButtonClicked=new Event(i),e.previousQuizItemClicked=new Event(i),e.selectionMemberOnlyClicked=new Event(i),e.start=function(){$("#quizzes").on("click",".mp3-header .icon-left",function(){e.backButtonClicked.notify()}),$("#quizzes").on("click",".quiz-item .answer-item",function(){$(this).addClass("active").siblings().removeClass("active"),e.quizAnswerClicked.notify({quizid:$(this).attr("data-quiz"),id:$(this).attr("data-id")})}),$("#quizzes").on("click",".mp3-header .icon-right",function(){e.homeButtonClicked.notify()}),$("#quizzes").on("click",".share .sharebox",function(){e.shareButtonClicked.notify()}),$("#quizzes").on("click",".previous-container .previous-button",function(){e.previousQuizButtonClicked.notify()}),$("#quizzes").on("click",".previous-container .previous-item",function(){return $(this).hasClass("noclick")?(e.selectionMemberOnlyClicked.notify(),!0):void e.previousQuizItemClicked.notify({id:$(this).attr("data-id")})}),t=new PageTransitions({el:"#quizzes",transition:"left"}),n=_.template($(".quiz-template").html()),r=_.template($(".quiz-score-template").html()),o=_.template($(".quiz-list-template").html())},e.moveQuiz=function(e){var t=$("#quizzes .quiz-item"),i=100/t.length*e;$("#quizzes .quiz-list").css({"-webkit-transform":"translate3d(-"+i+"%,0,0)",transform:"translate3d(-"+i+"%,0,0)"}),$("#quizzes > .tab-arrows .tab-container").css({"-webkit-transform":"translate3d("+(i>>0)+"%,0,0)",transform:"translate3d("+(i>>0)+"%,0,0)"})},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateScoreTemplate=function(t){e.removeScoreTemplate(),$("#quizzes .quiz-item.score .yourscore").append(r(t))},e.populateTemplate=function(t){debug&&console.log(t),e.removeTemplate(),$("#quizzes").append(n(t));var i=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list .quiz-item"),o=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list");i.width(o.width()-(window.innerWidth<=320?20:60)),o.width(i.length*o.width())},e.populateQuizListTemplate=function(t){e.removeQuizListTemplate(),$("#quizzes .scroller .previous-container").before(o(t));var i=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list .quiz-item"),n=$("#quizzes > .content > .scroller > .content-wrapper .quiz-list");i.width(n.width()-(window.innerWidth<=320?20:60)),n.width(i.length*n.width()),e.moveQuiz(0)},e.removeQuizListTemplate=function(){$("#quizzes .content-wrapper").remove()},e.removeTemplate=function(){$("#quizzes .tab-arrows, #quizzes .wrapper-scroller").remove()},e.removeScoreTemplate=function(){$("#quizzes .quiz-item.score .yourscore .score-container").remove()},e.togglePreviousQuizzes=function(){clearTimeout(u);var e=$("#quizzes .previous-container .previous-list"),t=$("#quizzes .previous-container .previous-button");e.toggleClass("active"),t.toggleClass("active");var i=e.hasClass("active")?e.get(0).scrollHeight:0;e.height(i)},e.show=function(e,i){a=!0,$("#quizzes, .trans-overlay").addClass("active"),i=!$.isEmptyObject(i)&&i&&"undefined"!=typeof i.dir?i.dir:"left",t.in(i,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,i){a=!1,i=!$.isEmptyObject(i)&&i&&"undefined"!=typeof i.dir?i.dir:"left",t.out(i,null,function(){$("#quizzes").removeClass("active"),"function"==typeof e&&e()})},e}(),quizzesController=function(){"use strict";function e(e){l.id=e.current;var t=c.getQuizz(l.id,e.amount);d.populateTemplate($.extend(!0,{allowed:e.allowed},t)),d.hideLoader()}function t(e){var t=c.getQuizz(parseInt(e.id));d.populateQuizListTemplate($.extend(!0,{},t))}function i(e){l={userAnswers:{},cid:0,pid:0,cscore:0,mscore:0,id:"undefined"==typeof e?(new Date).getMonth():e}}function n(){globalEvent.notify("home:show",{dir:"right"}),a.hide()}function o(e){return e.preventDefault(),l.cid<=0?(globalEvent.notify("home:show",{dir:"right"}),a.hide(),!0):(l.pid=l.cid,l.cid=parseInt(l.cid)-1,void d.moveQuiz(l.cid))}function r(){document.addEventListener("backbutton",o,!1)}function u(){document.removeEventListener("backbutton",o,!1)}var a={},s=!1,c=quizzesModel,l={},d=quizzesView;return globalEvent.attach("app:ready",function(){a.start()}),globalEvent.attach("quizzes:show",function(t){Queueing.get("quizzes").addTo(function(){a.show(function(){Queueing.get("quizzes").setActive(!1).trigger()},t)}),d.showLoader(),globalEvent.notify("permission:populatequizzes",{callback:function(t){return t.value||Queueing.get("quizzes").addTo(function(){d.hideLoader(),globalEvent.notify("home:show"),a.hide(function(){Queueing.get("quizzes").setActive(!1).removeAll()},{dir:"left"})}),i(),t.complimentary?(e($.extend({current:"free"},t)),!0):void e(t)}})}),globalEvent.attach("quizzes:hide",function(e){a.hide(!1,e)}),c.quizzesAdded.attach(function(){debug&&console.log("quizzes added")}),c.quizzesRemoved.attach(function(){}),d.backButtonClicked.attach(function(){return l.cid<=0?(globalEvent.notify("home:show",{dir:"right"}),a.hide(),!0):(l.pid=l.cid,l.cid=parseInt(l.cid)-1,void d.moveQuiz(l.cid))}),d.shareButtonClicked.attach(function(){globalEvent.notify("share",{id:"quiz",content:l.cscore})}),d.selectionMemberOnlyClicked.attach(function(){globalEvent.notify("messages:restrictedmember")}),d.previousQuizItemClicked.attach(function(e,n){i(parseInt(n.id)),t(n)}),d.quizAnswerClicked.attach(function(e,t){l.userAnswers[t.quizid]=t.id,l.pid=t.quizid,l.cid=parseInt(t.quizid)+1;var i=c.getQuizz(l.id).curr.questions;if(l.cid>=i.length){for(var n={score:0,maxscore:i.length,desc:"Congratulations!"},o=0,r=i.length,u=Object.keys(l.userAnswers);r>o;o++)parseInt(l.userAnswers[u[o]])===parseInt(i[o].c)&&n.score++;l.cscore=n.score,l.maxscore=n.maxscore,d.populateScoreTemplate(n)}d.moveQuiz(l.cid)}),d.homeButtonClicked.attach(function(){n()}),d.previousQuizButtonClicked.attach(function(){globalEvent.notify("permission:canShowPreviousItems",{callback:function(e){return e.value?void d.togglePreviousQuizzes():(globalEvent.notify("messages:nonmember"),!1)}})}),a.start=function(){d.start(),Queueing.set("quizzes")},a.hide=function(e,t){s=!1,u(),d.hide(function(){d.removeTemplate(),i(),"function"==typeof e&&e()},t)},a.show=function(e,t){s=!0,d.showLoader(),d.show(function(){r(),d.hideLoader(),"function"==typeof e&&e()},t)},a}();