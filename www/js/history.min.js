var historyModel=function(){var t={},r=[];return t.getHistory=function(){return r},t.getBackHistory=function(){return r.length<=0?!1:r[r.length-1]},t.addHistory=function(t){return r.length>0&&r[r.length-1].id===t.id?!0:void r.push(t)},t.addCurrent=function(t){_current=t},t.getCurrent=function(){return r.length>0?r[r.length-1]:!1},t.popHistory=function(){r.pop()},t.clearAll=function(){r.length=0},t}(),historyController=function(){function t(){var t=n.getCurrent();if(!t)return debug&&console.warn("Nothing to return in current history"),!1;debug&&console.log("modifying the current history");var r=$.extend(!0,{},t);r.id=r.id.replace(/show/g,"hide"),globalEvent.notify(r.id,{dir:"left"})}var r={},n=historyModel,e=!1;return globalEvent.attach("history:add",function(t){n.addHistory(t)}),globalEvent.attach("history:back",function(r){if(e)return!1;if(e=!0,!n.getBackHistory()||n.getCurrent().id.match(/home/g))return debug&&console.error("THERE IS NO MORE HISTORY!"),navigator.app.exitApp(),!1;t(r),n.popHistory();var o=n.getBackHistory();globalEvent.notify(o.id,{dir:"right"}),setTimeout(function(){e=!1},2e3)}),globalEvent.attach("history:clear",function(){n.clearAll()}),r}();