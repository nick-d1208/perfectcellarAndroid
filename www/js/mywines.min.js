var myWinesModel=function(){"use strict";var e={},n="myWinesModel",t=[];return e.winesAdded=new Event(n),e.winesRemoved=new Event(n),e.addWines=function(n){t=n,e.winesAdded.notify({wines:$.extend(!0,[],t)})},e.removeWines=function(){t.length=0,e.winesRemoved.notify()},e.getWines=function(){return $.extend(!0,[],t)},e.getWine=function(e,n){if("object"==typeof e&&!$.isEmptyObject(e))return"undefined"==typeof e.sIndex?t[e.id][e.cat]:{content:t[e.id][e.cat],sIndex:e.sIndex||0};if("number"!=typeof e||0>e)return debug&&console.log("index invalid"),!1;if(0>=n)return{curr:t[e]};var i=0>e-1?11:e-1;return{curr:t[e],prev:t[i]}},e}(),myWinesView=function(){"use strict";var e={},n=null,t="myWinesView",i=null,o={},s=null,a=!1;return e.backButtonClicked=new Event(t),e.homeButtonClicked=new Event(t),e.previousWineButtonClicked=new Event(t),e.selectionClicked=new Event(t),e.start=function(){$("#mywines").on("click",".mp3-header .icon-left",function(){e.backButtonClicked.notify()}),$("#mywines").on("click",".mp3-header .icon-right",function(){e.homeButtonClicked.notify()}),$("#mywines").on("click",".previous-container .previous-button",function(){e.previousWineButtonClicked.notify()}),$("#mywines").on("click",".bar-item, .wine-item, .previous-container .previous-item",function(){e.selectionClicked.notify({id:$(this).attr("data-id"),cat:$(this).attr("data-cat")})}),n=new PageTransitions({el:"#mywines",transition:"left"}),i=_.template($(".mywines-main-template").html())},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateTemplate=function(n){e.removeTemplate(),$("#mywines .scroller").append(i(n)),o.center=new centerCarousel("#mywines .wine-container",{onCarouselTap:function(){},onCarouselChange:function(e,n){$("#mywines .bar .content .bar-list .bar-item").eq(e).addClass("active").siblings().removeClass("active"),$("#mywines .bar .content .bar-list").height($("#mywines .bar .content .bar-list .bar-item").eq(e).outerHeight()).css({"-webkit-transform":"translate3d("+-(100/n*e)+"%,0,0)",transform:"translate3d("+-(100/n*e)+"%,0,0)"}),$(".generic-button a").attr("href",$("#mywines .wine-item").eq(e).attr("data-product-link"))}}),o.center.next(),$("#mywines .image-load").waitForImages({each:function(){$(this).addClass("active")},waitForAll:!0})},e.removeTemplate=function(){$("#mywines .content-wrapper").remove()},e.togglePreviousWines=function(){clearTimeout(s);var e=$("#mywines .previous-container .previous-list"),n=$("#mywines .previous-container .previous-button");e.toggleClass("active"),n.toggleClass("active");var t=e.hasClass("active")?e.get(0).scrollHeight+$("#mywines .generic-button-container").outerHeight():0;e.height(t)},e.show=function(e,t){a=!0,$("#mywines, .trans-overlay").addClass("active"),t=!$.isEmptyObject(t)&&t&&"undefined"!=typeof t.dir?t.dir:"left",n.in(t,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,t){a=!1,t=!$.isEmptyObject(t)&&t&&"undefined"!=typeof t.dir?t.dir:"left",n.out(t,null,function(){$("#mywines").removeClass("active"),"function"==typeof e&&e()})},e}(),myWinesController=function(){"use strict";function e(e){var n=c.getWine(e.current,e.amount);debug&&console.log(n),l.populateTemplate(n),l.hideLoader()}function n(){globalEvent.notify("home:show",{dir:"right"}),s.hide()}function t(e){e.preventDefault(),n()}function i(){document.addEventListener("backbutton",t,!1)}function o(){document.removeEventListener("backbutton",t,!1)}var s={},a=!1,c=myWinesModel,l=myWinesView;return globalEvent.attach("app:ready",function(){s.start()}),globalEvent.attach("mywines:show",function(n){Queueing.get("mywines").addTo(function(){s.show(function(){Queueing.get("mywines").setActive(!1).trigger()},n)}),l.showLoader(),globalEvent.notify("permission:populatemywines",{callback:function(n){return n.value||Queueing.get("mywines").addTo(function(){l.hideLoader(),globalEvent.notify("home:show"),s.hide(function(){Queueing.get("mywines").setActive(!1).removeAll()},{dir:"left"})}),n.complimentary?(e(n),!0):void e(n)}})}),globalEvent.attach("mywines:hide",function(e){s.hide(!1,e)}),c.winesAdded.attach(function(){debug&&console.log("wines added")}),c.winesRemoved.attach(function(){}),l.backButtonClicked.attach(function(){n()}),l.homeButtonClicked.attach(function(){n()}),l.previousWineButtonClicked.attach(function(){globalEvent.notify("permission:canShowPreviousItems",{callback:function(e){return e.value?void l.togglePreviousWines():(globalEvent.notify("messages:nonmember"),!1)}})}),l.selectionClicked.attach(function(e,n){globalEvent.notify("mywineslist:show",n),s.hide(!1,{dir:"right"})}),s.start=function(){l.start(),Queueing.set("mywines")},s.hide=function(e,n){a=!1,o(),l.hide(function(){l.removeTemplate(),"function"==typeof e&&e()},n)},s.show=function(e,n){a=!0,l.showLoader(),l.show(function(){i(),l.hideLoader(),"function"==typeof e&&e()},n)},s}(),myWinesListView=function(){"use strict";var e={},n=null,t="myWinesListView",i=null,o=!1;return e.backButtonClicked=new Event(t),e.homeButtonClicked=new Event(t),e.selectionClicked=new Event(t),e.start=function(){$("#mywines-list").on("click",".mp3-header .icon-left",function(){e.backButtonClicked.notify()}),$("#mywines-list").on("click",".mp3-header .icon-right",function(){e.homeButtonClicked.notify()}),$("#mywines-list").on("click",".list-item",function(){e.selectionClicked.notify({id:$(this).attr("data-id"),cat:$(this).attr("data-cat"),sIndex:$(this).attr("data-section")})}),n=new PageTransitions({el:"#mywines-list",transition:"left"}),i=_.template($(".mywines-list-template").html())},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateTemplate=function(n){e.removeTemplate(),$("#mywines-list").append(i(n)),$("#mywines-list .image-load").waitForImages({each:function(){$(this).addClass("active")},waitForAll:!0})},e.removeTemplate=function(){$("#mywines-list > *").remove()},e.show=function(e,t){o=!0,$("#mywines-list, .trans-overlay").addClass("active"),t=!$.isEmptyObject(t)&&t&&"undefined"!=typeof t.dir?t.dir:"left",n.in(t,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,t){o=!1,t=!$.isEmptyObject(t)&&t&&"undefined"!=typeof t.dir?t.dir:"left",n.out(t,null,function(){$("#mywines-list").removeClass("active"),"function"==typeof e&&e()})},e}(),myWinesListController=function(){"use strict";function e(){globalEvent.notify("home:show",{dir:"right"}),o.hide()}function n(e){e.preventDefault(),globalEvent.notify("mywines:show",{dir:"right"}),o.hide()}function t(){document.addEventListener("backbutton",n,!1)}function i(){document.removeEventListener("backbutton",n,!1)}var o={},s=!1,a=myWinesModel,c={},l=myWinesListView;return globalEvent.attach("app:ready",function(){o.start()}),globalEvent.attach("mywineslist:show",function(e){Queueing.get("mywineslist").addTo(function(){o.show(function(){Queueing.get("mywineslist").setActive(!1).trigger()},e)}),c.id="undefined"!=typeof e.id?e.id:c.id,c.cat="undefined"!=typeof e.cat?e.cat:c.cat,l.populateTemplate(a.getWine(c))}),globalEvent.attach("mywineslist:hide",function(e){o.hide(!1,e)}),a.winesRemoved.attach(function(){}),l.backButtonClicked.attach(function(){globalEvent.notify("mywines:show",{dir:"right"}),o.hide()}),l.homeButtonClicked.attach(function(){e()}),l.selectionClicked.attach(function(e,n){globalEvent.notify("mywinesdesc:show",n),o.hide(!1,{dir:"right"})}),o.start=function(){l.start(),Queueing.set("mywineslist")},o.hide=function(e,n){s=!1,i(),l.hide(function(){l.removeTemplate(),"function"==typeof e&&e()},n)},o.show=function(e,n){s=!0,l.showLoader(),l.show(function(){t(),l.hideLoader(),"function"==typeof e&&e()},n)},o}(),myWinesDescView=function(){"use strict";var e={},n=null,t="myWinesDescView",i={},o=null,s=!1;return e.backButtonClicked=new Event(t),e.homeButtonClicked=new Event(t),e.iconClicked=new Event(t),e.start=function(){$("#mywines-desc").on("click",".mp3-header .icon-left",function(){e.backButtonClicked.notify()}),$("#mywines-desc").on("click",".mp3-header .icon-right",function(){e.homeButtonClicked.notify()}),$("#mywines-desc").on("click",".icon-item",function(){e.iconClicked.notify(),i.center&&i.center.slidePane($(this).index()),i.left&&i.left.slidePane($(this).index())}),n=new PageTransitions({el:"#mywines-desc",transition:"left"}),o=_.template($(".mywines-desc-template").html())},e.showLoader=function(){$(".disable-overlay").addClass("show")},e.hideLoader=function(){$(".disable-overlay").removeClass("show")},e.populateTemplate=function(n){debug&&console.log(n),e.removeTemplate(),$("#mywines-desc").append(o(n)),i.center=new centerCarousel("#mywines-desc .icon-container",{noDrag:!0,onCarouselTap:function(){},onCarouselChange:function(e){$("#mywines-desc .content > .icon-container .icon-list .icon-item").eq(e).addClass("active").siblings().removeClass("active"),i.left&&i.left.slidePane(e,!0)}}),i.left=new centerCarousel("#mywines-desc .desc-container",{noDrag:!0,onCarouselTap:function(){},onCarouselChange:function(e){i.center&&i.center.slidePane(e)}}),"undefined"!=typeof n.sIndex&&(i.center.movePane(n.sIndex,!0),i.left.movePane(n.sIndex)),$("#mywines-desc .image-load").waitForImages({each:function(){$(this).addClass("active")},waitForAll:!0})},e.removeTemplate=function(){$("#mywines-desc > *").remove()},e.show=function(e,t){s=!0,$("#mywines-desc, .trans-overlay").addClass("active"),t=!$.isEmptyObject(t)&&t&&"undefined"!=typeof t.dir?t.dir:"left",n.in(t,null,function(){$(".trans-overlay").removeClass("active"),"function"==typeof e&&e()})},e.hide=function(e,t){s=!1,t=!$.isEmptyObject(t)&&t&&"undefined"!=typeof t.dir?t.dir:"left",n.out(t,null,function(){$("#mywines-desc").removeClass("active"),"function"==typeof e&&e()})},e}(),myWinesDescController=function(){"use strict";function e(){globalEvent.notify("home:show",{dir:"right"}),o.hide()}function n(e){e.preventDefault(),globalEvent.notify("mywineslist:show",{dir:"right"}),o.hide()}function t(){document.addEventListener("backbutton",n,!1)}function i(){document.removeEventListener("backbutton",n,!1)}var o={},s=!1,a=myWinesModel,c={},l=myWinesDescView;return globalEvent.attach("app:ready",function(){o.start()}),globalEvent.attach("mywinesdesc:show",function(e){Queueing.get("mywinesdesc").addTo(function(){o.show(function(){Queueing.get("mywinesdesc").setActive(!1).trigger()},e)}),c.id="undefined"!=typeof e.id?e.id:c.id,c.cat="undefined"!=typeof e.cat?e.cat:c.cat,c.sIndex="undefined"!=typeof e.sIndex?e.sIndex:c.sIndex,l.populateTemplate(a.getWine(c))}),globalEvent.attach("mywinesdesc:hide",function(e){o.hide(!1,e)}),a.winesRemoved.attach(function(){}),l.backButtonClicked.attach(function(){globalEvent.notify("mywineslist:show",{dir:"right"}),o.hide()}),l.homeButtonClicked.attach(function(){e()}),o.start=function(){l.start(),Queueing.set("mywinesdesc")},o.hide=function(e,n){s=!1,i(),l.hide(function(){l.removeTemplate(),"function"==typeof e&&e()},n)},o.show=function(e,n){s=!0,l.showLoader(),l.show(function(){t(),l.hideLoader(),"function"==typeof e&&e()},n)},o}();